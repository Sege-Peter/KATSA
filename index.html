<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KATSA Membership Form</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">

  <div class="max-w-2xl mx-auto mt-20 bg-white p-8 rounded shadow">
    <h2 class="text-2xl font-bold text-center text-yellow-600 mb-6">KATSA Membership Form</h2>
    <form id="membershipForm" class="space-y-4">
      <input type="email" id="email" placeholder="Email Address" class="w-full border rounded px-4 py-2" required>
      <input type="text" id="name" placeholder="Full Name" class="w-full border rounded px-4 py-2" required>
      <select id="gender" class="w-full border rounded px-4 py-2" required>
        <option value="">Select Gender</option>
        <option>Male</option>
        <option>Female</option>
      </select>
      <input type="date" id="dob" class="w-full border rounded px-4 py-2" required>
      <input type="text" id="nationalId" placeholder="National ID or Student ID" class="w-full border rounded px-4 py-2" required>
      <input type="tel" id="phone" placeholder="Phone Number" class="w-full border rounded px-4 py-2" required>
      <input type="text" id="institution" placeholder="Tertiary Institution Name" class="w-full border rounded px-4 py-2" required>
      <input type="text" id="level" placeholder="Level of Study" class="w-full border rounded px-4 py-2" required>
      <input type="text" id="course" placeholder="Course / Program" class="w-full border rounded px-4 py-2" required>
      <input type="text" id="year" placeholder="Year of Study" class="w-full border rounded px-4 py-2" required>
      <input type="text" id="village" placeholder="Home Sub-location / Village in Kanyaluo" class="w-full border rounded px-4 py-2" required>
      <select id="participate" class="w-full border rounded px-4 py-2" required>
        <option value="">Willing to participate in KATSA activities?</option>
        <option>Yes</option>
        <option>No</option>
      </select>
      <textarea id="talent" placeholder="Do you have any leadership talent or skill to share?" class="w-full border rounded px-4 py-2"></textarea>
      <input type="file" id="photo" accept="image/*" class="w-full border rounded px-4 py-2" required>
      <label class="block text-sm font-medium">Rate KATSA leadership UpToDate (1-5)</label>
      <input type="range" id="rating" min="1" max="5" class="w-full">

      <button type="submit" class="w-full bg-yellow-600 text-white py-2 rounded hover:bg-yellow-700">Submit</button>
    </form>
    <p id="formMessage" class="text-center mt-4 font-medium"></p>
  </div>

  <script>
    document.getElementById("membershipForm").addEventListener("submit", async function (e) {
      e.preventDefault();

      const formData = {
        email: document.getElementById("email").value,
        name: document.getElementById("name").value,
        gender: document.getElementById("gender").value,
        dob: document.getElementById("dob").value,
        nationalId: document.getElementById("nationalId").value,
        phone: document.getElementById("phone").value,
        institution: document.getElementById("institution").value,
        level: document.getElementById("level").value,
        course: document.getElementById("course").value,
        year: document.getElementById("year").value,
        village: document.getElementById("village").value,
        participate: document.getElementById("participate").value,
        talent: document.getElementById("talent").value,
        photo: document.getElementById("photo").files[0]?.name || "",
        rating: document.getElementById("rating").value
      };

      const msg = document.getElementById("formMessage");

      try {
        const res = await fetch("https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify(formData)
        });

        if (res.ok) {
          msg.textContent = "✅ Submitted successfully!";
          msg.className = "text-green-600 text-center mt-4 font-medium";
          document.getElementById("membershipForm").reset();
        } else {
          throw new Error();
        }
      } catch (err) {
        msg.textContent = "❌ Submission failed. Please try again.";
        msg.className = "text-red-600 text-center mt-4 font-medium";
      }
    });
  </script>

</body>
</html>
